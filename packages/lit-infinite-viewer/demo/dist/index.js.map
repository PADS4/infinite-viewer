{"version":3,"file":"index.js","sources":["../../src/LitInfiniteViewer.ts","../index.ts"],"sourcesContent":["import { LitElement, html, customElement, property } from \"lit-element\";\nimport VanillaInfiniteViewer, {\n    InfiniteViewerProperties, OPTION_TYPES,\n    EVENTS, PROPERTIES, InfiniteViewerMethods, METHODS\n} from \"infinite-viewer\";\nimport { Properties, withMethods, MethodInterface } from \"framework-utils\";\nimport { camelize } from \"@daybrush/utils\";\n\n@Properties(PROPERTIES as any, (prototype, name) => {\n    property({ type: OPTION_TYPES[name] })(prototype, name);\n})\n@customElement(\"lit-infinite-viewer\")\nexport class LitInfiniteViewer extends LitElement {\n    @withMethods(METHODS as any, { click: \"clickInfiniteViewer\" })\n    private infiniteViewer!: VanillaInfiniteViewer;\n    public firstUpdated() {\n        const options: Partial<InfiniteViewerProperties> = {};\n\n        PROPERTIES.forEach(name => {\n            if (typeof this[name] !== \"undefined\") {\n                options[name as any] = this[name];\n            }\n        });\n        const viewport = this.children[0] as HTMLElement;\n        const scrollArea = this.shadowRoot.querySelector(\"div\") as HTMLElement;\n\n        this.infiniteViewer = new VanillaInfiniteViewer(\n            this,\n            viewport,\n            {\n                ...options,\n                scrollArea,\n            }\n        );\n\n        const infiniteViewer = this.infiniteViewer;\n\n        EVENTS.forEach((name, i) => {\n            infiniteViewer.on(name, e => {\n                const result = this.dispatchEvent(new CustomEvent(camelize(`lit ${name}`), {\n                    detail: { ...e },\n                }));\n\n                if (result === false) {\n                    (e as any).stop();\n                }\n            });\n        });\n    }\n    public render() {\n        return html`<div></div><slot></slot>`;\n    }\n    public updated(changedProperties) {\n        const infiniteViewer = this.infiniteViewer;\n        changedProperties.forEach((oldValue, propName) => {\n            if (PROPERTIES.indexOf(propName)) {\n                infiniteViewer[propName] = this[propName];\n            }\n        });\n    }\n    public disconnectedCallback() {\n        super.disconnectedCallback();\n        this.infiniteViewer.destroy();\n    }\n}\nexport interface LitInfiniteViewer extends InfiniteViewerProperties,\n    MethodInterface<InfiniteViewerMethods, VanillaInfiniteViewer, LitInfiniteViewer, {\n        \"scrollTo\": \"scrollToViewer\",\n        \"scrollBy\": \"scrollByViewer\",\n    }> { }\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \"lit-infinite-viewer\": LitInfiniteViewer;\n    }\n}\n","import { html } from \"lit-element\";\nimport { render } from \"lit-html\";\nimport \"../src/LitInfiniteViewer\";\n\nrender(html`\n<lit-infinite-viewer class=\"viewer\">\n    <div class=\"viewport\"></div>\n</lit-infinite-viewer>`, document.body);\n"],"names":["LitInfiniteViewer","LitElement","firstUpdated","options","PROPERTIES","forEach","name","viewport","children","scrollArea","shadowRoot","querySelector","infiniteViewer","VanillaInfiniteViewer","EVENTS","i","on","e","result","dispatchEvent","CustomEvent","camelize","detail","stop","render","html","updated","changedProperties","oldValue","propName","indexOf","disconnectedCallback","destroy","__decorate","withMethods","METHODS","click","Properties","prototype","property","type","OPTION_TYPES","customElement","document","body"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAYA,IAAaA,iBAAiB,GAA9B,MAAaA,iBAAb,SAAuCC,UAAvC;IAGWC,EAAAA,YAAY;IACf,UAAMC,OAAO,GAAsC,EAAnD;IAEAC,IAAAA,UAAU,CAACC,OAAX,CAAmBC,IAAI;IACnB,UAAI,OAAO,KAAKA,IAAL,CAAP,KAAsB,WAA1B,EAAuC;IACnCH,QAAAA,OAAO,CAACG,IAAD,CAAP,GAAuB,KAAKA,IAAL,CAAvB;IACH;IACJ,KAJD;IAKA,UAAMC,QAAQ,GAAG,KAAKC,QAAL,CAAc,CAAd,CAAjB;IACA,UAAMC,UAAU,GAAG,KAAKC,UAAL,CAAgBC,aAAhB,CAA8B,KAA9B,CAAnB;IAEA,SAAKC,cAAL,GAAsB,IAAIC,cAAJ,CAClB,IADkB,EAElBN,QAFkB,kCAIXJ;IACHM,MAAAA;UALc,CAAtB;IASA,UAAMG,cAAc,GAAG,KAAKA,cAA5B;IAEAE,IAAAA,MAAM,CAACT,OAAP,CAAe,CAACC,IAAD,EAAOS,CAAP;IACXH,MAAAA,cAAc,CAACI,EAAf,CAAkBV,IAAlB,EAAwBW,CAAC;IACrB,cAAMC,MAAM,GAAG,KAAKC,aAAL,CAAmB,IAAIC,WAAJ,CAAgBC,QAAQ,QAAQf,MAAR,CAAxB,EAAyC;IACvEgB,UAAAA,MAAM,oBAAOL;IAD0D,SAAzC,CAAnB,CAAf;;IAIA,YAAIC,MAAM,KAAK,KAAf,EAAsB;IACjBD,UAAAA,CAAS,CAACM,IAAV;IACJ;IACJ,OARD;IASH,KAVD;IAWH;;IACMC,EAAAA,MAAM;IACT,WAAOC,8BAAP;IACH;;IACMC,EAAAA,OAAO,CAACC,iBAAD;IACV,UAAMf,cAAc,GAAG,KAAKA,cAA5B;IACAe,IAAAA,iBAAiB,CAACtB,OAAlB,CAA0B,CAACuB,QAAD,EAAWC,QAAX;IACtB,UAAIzB,UAAU,CAAC0B,OAAX,CAAmBD,QAAnB,CAAJ,EAAkC;IAC9BjB,QAAAA,cAAc,CAACiB,QAAD,CAAd,GAA2B,KAAKA,QAAL,CAA3B;IACH;IACJ,KAJD;IAKH;;IACME,EAAAA,oBAAoB;IACvB,UAAMA,oBAAN;IACA,SAAKnB,cAAL,CAAoBoB,OAApB;IACH;;KAnDL;;IAEIC,YADCC,WAAW,CAACC,OAAD,EAAiB;IAAEC,EAAAA,KAAK,EAAE;IAAT,CAAjB,0DACZ;;IAFSpC,iBAAiB,eAJ7BqC,UAAU,CAACjC,UAAD,EAAoB,CAACkC,SAAD,EAAYhC,IAAZ;IAC3BiC,EAAAA,QAAQ,CAAC;IAAEC,IAAAA,IAAI,EAAEC,YAAY,CAACnC,IAAD;IAApB,GAAD,CAAR,CAAuCgC,SAAvC,EAAkDhC,IAAlD;IACH,CAFU,GAGVoC,aAAa,CAAC,qBAAD,IACD1C,kBAAA;;;ICRbwB,MAAM,CAACC;;;uBAAD,EAGmBkB,QAAQ,CAACC,IAH5B,CAAN;;;;"}