{"version":3,"file":"infinite-viewer.cjs.js","sources":["../src/react-infinite-viewer/consts.ts","../src/react-infinite-viewer/InfiniteViewer.tsx"],"sourcesContent":["import { EVENTS } from \"infinite-viewer\";\nimport { camelize } from \"@daybrush/utils\";\n\nexport const REACT_EVENTS =  EVENTS.map(name => camelize(`on ${name}`));\n","import * as React from \"react\";\nimport VanillaInfiniteViewer, {\n    CLASS_NAME,\n    OPTIONS,\n    InfiniteViewerOptions,\n    PROPERTIES,\n    InfiniteViewerProperties,\n    EVENTS,\n    InfiniteViewerMethods,\n    METHODS,\n} from \"infinite-viewer\";\nimport { ref, MethodInterface, withMethods } from \"framework-utils\";\nimport { InfiniteViewerProps } from \"./types\";\nimport { REACT_EVENTS } from \"./consts\";\n\nexport default class InfiniteViewer extends React.PureComponent<Partial<InfiniteViewerProps>> {\n    @withMethods(METHODS as any)\n    private infiniteViewer!: VanillaInfiniteViewer;\n    private container!: HTMLElement;\n    private scrollArea!: HTMLElement;\n    public render() {\n        const className = this.props.className;\n\n        return <div className={`${className || \"\"} ${CLASS_NAME}`} ref={ref(this, \"container\")}>\n            <div ref={ref(this, \"scrollArea\")}></div>\n            {this.props.children}\n        </div>;\n    }\n    public componentDidMount() {\n        const props = this.props;\n        const options: Partial<InfiniteViewerOptions> = {};\n\n        OPTIONS.forEach(name => {\n            if (name in props) {\n                (options as any)[name] = props[name];\n            }\n        });\n        this.infiniteViewer = new VanillaInfiniteViewer(\n            this.container,\n            this.scrollArea.nextElementSibling as HTMLElement,\n            {\n                ...options,\n                scrollArea: this.scrollArea,\n            },\n        );\n\n        EVENTS.forEach((name, i) => {\n            this.infiniteViewer.on(name, (e: any) => {\n                const selfProps = this.props as any;\n                const result = selfProps[REACT_EVENTS[i]] && selfProps[REACT_EVENTS[i]](e);\n\n                if (result === false) {\n                    e.stop();\n                }\n            });\n        });\n    }\n    public componentDidUpdate(prevProps: Partial<InfiniteViewerProperties>) {\n        const props = this.props;\n        const infiniteViewer = this.infiniteViewer;\n\n        PROPERTIES.forEach(name => {\n            if (prevProps[name] !== props[name]) {\n                (infiniteViewer as any)[name] = props[name];\n            }\n        });\n    }\n    public componentWillUnmount() {\n        this.infiniteViewer.destroy();\n    }\n}\n// tslint:disable-next-line: max-line-length\nexport default interface InfiniteViewer extends MethodInterface<InfiniteViewerMethods, VanillaInfiniteViewer, InfiniteViewer> {}\n"],"names":["REACT_EVENTS","EVENTS","map","name","camelize","__extends","className","props","React","CLASS_NAME","ref","children","options","OPTIONS","forEach","infiniteViewer","VanillaInfiniteViewer","container","scrollArea","nextElementSibling","i","_this","on","e","selfProps","result","stop","prevProps","PROPERTIES","destroy","__decorate","withMethods","METHODS"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,IAAMA,YAAY,GAAIC,4BAAM,CAACC,GAAP,CAAW,UAAAC,IAAA;AAAQ,SAAAC,cAAQ,CAAC,QAAMD,IAAP,CAAR;AAAsB,CAAzC,CAAtB;;ACYP;;;AAA4CE,EAAAA,iCAAA;;AAA5C,yBAAA;;AAuDC;;;;AAlDU,gBAAA,GAAP;AACI,QAAMC,SAAS,GAAG,KAAKC,KAAL,CAAWD,SAA7B;AAEA,WAAOE,mBAAA,MAAA;AAAKF,MAAAA,SAAS,EAAE,CAAGA,SAAS,IAAI,EAAhB,OAAA,GAAsBG;AAAcC,MAAAA,GAAG,EAAEA,kBAAG,CAAC,IAAD,EAAO,WAAP;KAA5D,EACHF,mBAAA,MAAA;AAAKE,MAAAA,GAAG,EAAEA,kBAAG,CAAC,IAAD,EAAO,YAAP;KAAb,CADG,EAEF,KAAKH,KAAL,CAAWI,QAFT,CAAP;AAIH,GAPM;;AAQA,2BAAA,GAAP;AAAA,oBAAA;;AACI,QAAMJ,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMK,OAAO,GAAmC,EAAhD;AAEAC,IAAAA,6BAAO,CAACC,OAAR,CAAgB,UAAAX,IAAA;AACZ,UAAIA,IAAI,IAAII,KAAZ,EAAmB;AACdK,QAAAA,OAAe,CAACT,IAAD,CAAf,GAAwBI,KAAK,CAACJ,IAAD,CAA7B;AACJ;AACJ,KAJD;AAKA,SAAKY,cAAL,GAAsB,IAAIC,qBAAJ,CAClB,KAAKC,SADa,EAElB,KAAKC,UAAL,CAAgBC,kBAFE,wBAIXP;AACHM,MAAAA,UAAU,EAAE,KAAKA;MALH,CAAtB;AASAjB,IAAAA,4BAAM,CAACa,OAAP,CAAe,UAACX,IAAD,EAAOiB,CAAP;AACXC,MAAAA,KAAI,CAACN,cAAL,CAAoBO,EAApB,CAAuBnB,IAAvB,EAA6B,UAACoB,CAAD;AACzB,YAAMC,SAAS,GAAGH,KAAI,CAACd,KAAvB;AACA,YAAMkB,MAAM,GAAGD,SAAS,CAACxB,YAAY,CAACoB,CAAD,CAAb,CAAT,IAA8BI,SAAS,CAACxB,YAAY,CAACoB,CAAD,CAAb,CAAT,CAA2BG,CAA3B,CAA7C;;AAEA,YAAIE,MAAM,KAAK,KAAf,EAAsB;AAClBF,UAAAA,CAAC,CAACG,IAAF;AACH;AACJ,OAPD;AAQH,KATD;AAUH,GA5BM;;AA6BA,4BAAA,GAAP,UAA0BC,SAA1B;AACI,QAAMpB,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMQ,cAAc,GAAG,KAAKA,cAA5B;AAEAa,IAAAA,gCAAU,CAACd,OAAX,CAAmB,UAAAX,IAAA;AACf,UAAIwB,SAAS,CAACxB,IAAD,CAAT,KAAoBI,KAAK,CAACJ,IAAD,CAA7B,EAAqC;AAChCY,QAAAA,cAAsB,CAACZ,IAAD,CAAtB,GAA+BI,KAAK,CAACJ,IAAD,CAApC;AACJ;AACJ,KAJD;AAKH,GATM;;AAUA,8BAAA,GAAP;AACI,SAAKY,cAAL,CAAoBc,OAApB;AACH,GAFM;;AAlDPC,EAAAA,YADCC,0BAAW,CAACC,6BAAD,uDACZ;;AAqDJ,uBAAA;AAvDA,EAA4CxB,oBAA5C;;;;"}